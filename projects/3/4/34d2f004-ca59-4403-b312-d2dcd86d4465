{"id":"34d2f004-ca59-4403-b312-d2dcd86d4465","title":"Sqlish","type":"note","parents":["432137cb-5a3a-4e75-9150-b49e2aabffeb"],"blocking":[],"_blocks":[{"contents":"Running SQL(ish) Queries on the CLI","level":"1","type":"heading"},{"contents":"see, insane ideas.","type":"paragraph"},{"contents":"$ ./pm sqlish 'select created, short_id, title, type, icon from asdf group by 'type' order by created limit 3'        \ntime=2024-07-31T15:27:43.032+02:00 level=INFO msg=LoggerInitialized\ntime=2024-07-31T15:27:43.038+02:00 level=INFO msg=\"Starting pm\" pm.mod=main\ntime=2024-07-31T15:27:43.038+02:00 level=INFO msg=LoadNotes pm.mod=adapter\ntime=2024-07-31T15:27:43.043+02:00 level=INFO msg=\"Executing Command\" pm.mod=main\nLIMIT 3\nSelect=[created, short_id, title, type, icon] From=[asdf] Where=[] GroupBy=[type] OrderBy=[created ASC] Limit=[3]\n[created short_id title type icon]\nlog\n┌──────────────────┬──────────────────┬──────────────────┬──────────────────┬──────────────────┐\n│     created      │     short_id     │      title       │       type       │       icon       │\n├──────────────────┼──────────────────┼──────────────────┼──────────────────┼──────────────────┤\n│ 1722338778       │ ed8ea678         │ Working on the   │ log              │ ⏰               │\n│                  │                  │ project manager  │                  │                  │\n│ 1722415301       │ 25c22c88         │ Improving PM     │ log              │ ⏰               │\n└──────────────────┴──────────────────┴──────────────────┴──────────────────┴──────────────────┘\nproject\n┌──────────────────┬──────────────────┬──────────────────┬──────────────────┬──────────────────┐\n│     created      │     short_id     │      title       │       type       │       icon       │\n├──────────────────┼──────────────────┼──────────────────┼──────────────────┼──────────────────┤\n│ 1706202061       │ 883892c6         │ Personal Project │ project          │ 📁               │\n│                  │                  │ Manager          │                  │                  │\n└──────────────────┴──────────────────┴──────────────────┴──────────────────┴──────────────────┘\ntime=2024-07-31T15:27:43.045+02:00 level=INFO msg=\"Shutting Down and Saving Notes\" pm.mod=main\ntime=2024-07-31T15:27:43.045+02:00 level=INFO msg=SaveNotes pm.mod=adapter","lang":"","type":"code"},{"contents":"Which can be run in the web, too","type":"paragraph"},{"display":"table","query":"select created, short_id, title, type, icon from asdf group by 'type' order by created limit 3","type":"table_view"},{"contents":"it has some notable bugs/oddities like:","type":"paragraph"},{"contents":["sorting is non-deterministic, even when an order by is supplied","we do nothing with the table name? should we?"],"ordered":false,"type":"list"},{"contents":"More Fun Things","level":"1","type":"heading"},{"contents":"see @45d34204-0023-4bf5-bab8-6a5d9f0eab1b","type":"paragraph"},{"contents":"From Table","level":"1","type":"heading"},{"contents":"perhaps we could use FROM TABLE as an implicit","type":"paragraph"},{"contents":"where parent = 'TABLE'","lang":"","type":"code"},{"contents":"or maybe","type":"paragraph"},{"contents":"where ancestors includes 'TABLE'","lang":"","type":"code"},{"contents":"Limits of the -Ish","level":"1","type":"heading"},{"contents":"this would be a totally valid thing to want to query but currently impossible","type":"paragraph"},{"contents":"./pm sqlish \"SELECT title, pretty_duration(end_time - start_time) FROM tasks","lang":"","type":"code"},{"contents":"is there an argument for loading the data into an (in memory?) sql database and use the real query engine to make these queries and calculate these fields?","type":"paragraph"},{"contents":"SELECT end_time - start_time AS duration","lang":"","type":"code"},{"contents":"doesn't seem to be extractable. So, maybe it is worth it to temporarily load + query there?","type":"paragraph"}],"_tags":[{"type":"tag","title":"Tags","value":"","icon":""},{"type":"tag","title":"Author","value":"@13bcdf42-28c0-490b-8912-d60c7bf3a9c7","icon":""}],"created":1722432480,"modified":1722938287,"version":2}